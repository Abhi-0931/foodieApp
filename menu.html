<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Foodie - Menu</title>
  <link rel="stylesheet" href="menu.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<body>

<header>
  <nav class="navbar">
    <a href="index.html" class="logo">Foodie.</a>
    <ul class="navlist">
      <li><a href="index.html">Home</a></li>
      <li><a href="menu.html">Menu</a></li>
      <li><a href="service.html">Services</a></li>
      <li><a href="about.html">About us</a></li>
      <li><a href="contact.html">Contact us</a></li>
    </ul>
    <div class="desktop-action">
      <a href="cart.html" class="cart-icon">
        <i class="fa-solid fa-bag-shopping"></i>
        <span class="cart-value">0</span>
      </a>
      <a href="sign.html" class="btn">Sign in <i class="fa-solid fa-arrow-right-from-bracket"></i></a>
      <a href="#" class="hamburger"><i class="fa-solid fa-bars"></i></a>
    </div>
  </nav>
</header>

<section class="section menu-section">
  <div class="text-content">
    <h3>Our Menu</h3>
    <h2>Delicious Dishes to Satisfy Your Taste</h2>
    <p>Explore our wide range of delicious dishes crafted with fresh ingredients and served with love.</p>
  </div>

  <div id="menu-container"></div>
</section>

<footer>
  <p>&copy; 2025 Foodie. All Rights Reserved.</p>
</footer>

<script src="cart.js"></script>
<script>
async function loadMenu() {
  try {
    const res = await fetch("http://localhost:8080/api/products");
    const products = await res.json();

    const container = document.getElementById("menu-container");
    container.innerHTML = "";

    const categories = {};
    products.forEach(p => {
      if (!categories[p.category]) categories[p.category] = [];
      categories[p.category].push(p);
    });

    for (const [cat, items] of Object.entries(categories)) {
      const catDiv = document.createElement("div");
      catDiv.classList.add("menu-category");
      catDiv.innerHTML = `<h3>${cat}</h3><div class="cards"></div>`;
      const cardsDiv = catDiv.querySelector(".cards");

      items.forEach(item => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.innerHTML = `
          <img src="asset/${item.image}" alt="${item.name}">
          <h4>${item.name}</h4>
          // <p>${item.description}</p>
          <p class="price">$${item.price}</p>
          <button class="btn add-to-cart"
            data-id="${item.id}"
            data-name="${item.name}"
            data-price="${item.price}"
            data-img="asset/${item.image}">Add to Cart</button>
        `;
        cardsDiv.appendChild(card);
      });

      container.appendChild(catDiv);
    }

    attachAddToCartHandlers();
  } catch (err) {
    console.error(err);
    alert("Failed to load menu.");
  }
}

document.addEventListener("DOMContentLoaded", () => {
  loadMenu();
  updateCartValue();
});
</script>

</body>
</html>
